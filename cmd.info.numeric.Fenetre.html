<div style="min-width:40px;height:100%;vertical-align: top;"  class="cmd #history# tooltips cmd-widget" data-type="info" data-subtype="binary" data-cmd_id="#id#" data-cmd_uid="#uid#" data-eqLogic_id="#eqLogic_id#" data-eqLogic_id="#eqLogic_id#" title="#collectDate#">
    <!-- Info Widget
            Basé sur les widget de 		: 
            Mise à jour 				: JAG 20190829 : Création
    -->
    <div class="title #hide_name#">
        <div class="cmdName" style="#hideCmdName#">#name_display#</div>
    </div>
    <div class="content-sm ">
        <span class="iconCmd#uid#"></span>
    </div>
    <div style="font-weight: bold;font-size : 10px;">
        <span class="timeCmd#id# timeCmd label label-default value"></span>
    </div>

<script>
    jeedom.cmd.update['#id#'] = function(_options){
        // Options de personnalisation avec valeur par defaut
            // Paramètre "sizehw" : à déclarer en pixels - 80 maxi
                    var srcImgHeight_M  = (is_numeric('#sizeh-M#')) ? parseFloat('#sizeh-M#') : 40;
                    var srcImgWidth_M   = (is_numeric('#sizew-M#')) ? parseFloat('#sizew-M#') : 40;
                    var srcImgSize_M    = 'height='+srcImgHeight_M+'px width='+srcImgWidth_M+'px';
            // Paramétrage Niveau
                    var value_0         = (is_numeric('#valeur_0#')) ? parseFloat('#valeur_0#') : 0;
                    var value_1         = (is_numeric('#valeur_1#')) ? parseFloat('#valeur_1#') : 1;
                    var value_2         = (is_numeric('#valeur_2#')) ? parseFloat('#valeur_2#') : 2;
                    var value_3         = (is_numeric('#valeur_3#')) ? parseFloat('#valeur_3#') : 3;
                    var value_4         = (is_numeric('#valeur_4#')) ? parseFloat('#valeur_4#') : 4;
                    var value_5         = (is_numeric('#valeur_5#')) ? parseFloat('#valeur_5#') : 5;
                    var value_6         = (is_numeric('#valeur_6#')) ? parseFloat('#valeur_6#') : 6;
                    var value_7         = (is_numeric('#valeur_7#')) ? parseFloat('#valeur_7#') : 7;
                    var value_8         = (is_numeric('#valeur_8#')) ? parseFloat('#valeur_8#') : 8;
            // Affichage durée changement dernier etat
                    var srcImglogoTime_M  = '#logoTime-M#';
            // Paramétrage des images
                    var srcImgURL_M       = 'plugins/widget/core/template/dashboard/cmd.info.numeric.Fenetre/';
                // Paramètrage du logo Erreur
                    var srcImglogoER    = ('#logo_error#'!='#'+'logo_error#') ? "#logo_error#" : "error";
                    var srcImglogoER_T  = ('#logoER_type#'!='#'+'logoER_type#') ? "#logoER_type#" : "png";
                // Paramètrage des images
                    var srcImgValue_0   = ('#logo_0#'!='#'+'logo_0#') ? "#logo_0#" : "baie_fermee";
                    var srcImgValue_0_T = ('#logo_0_type#'!='#'+'logo_0_type#') ? "#logo_0_type#" : "png";
                    var srcImgValue_1   = ('#logo_1#'!='#'+'logo_1#') ? "#logo_1#" : "baie_ouverte-G";
                    var srcImgValue_1_T = ('#logo_1_type#'!='#'+'logo_1_type#') ? "#logo_1_type#" : "png";
                    var srcImgValue_2   = ('#logo_2#'!='#'+'logo_2#') ? "#logo_2#" : "baie_ouverte-D";
                    var srcImgValue_2_T = ('#logo_2_type#'!='#'+'logo_2_type#') ? "#logo_2_type#" : "png";
                    var srcImgValue_3   = ('#logo_3#'!='#'+'logo_3#') ? "#logo_3#" : "baie_ouverte";
                    var srcImgValue_3_T = ('#logo_3_type#'!='#'+'logo_3_type#') ? "#logo_3_type#" : "png";
                    var srcImgValue_4   = ('#logo_4#'!='#'+'logo_4#') ? "#logo_4#" : "baie_ouverte";
                    var srcImgValue_4_T = ('#logo_4_type#'!='#'+'logo_4_type#') ? "#logo_4_type#" : "png";
                    var srcImgValue_5   = ('#logo_5#'!='#'+'logo_5#') ? "#logo_5#" : "baie_ouverte";
                    var srcImgValue_5_T = ('#logo_5_type#'!='#'+'logo_5_type#') ? "#logo_5_type#" : "png";
                    var srcImgValue_6   = ('#logo_6#'!='#'+'logo_6#') ? "#logo_6#" : "baie_ouverte";
                    var srcImgValue_6_T = ('#logo_6_type#'!='#'+'logo_6_type#') ? "#logo_6_type#" : "png";
                    var srcImgValue_7   = ('#logo_7#'!='#'+'logo_7#') ? "#logo_7#" : "baie_ouverte";
                    var srcImgValue_7_T = ('#logo_7_type#'!='#'+'logo_7_type#') ? "#logo_7_type#" : "png";
                    var srcImgValue_8   = ('#logo_8#'!='#'+'logo_8#') ? "#logo_8#" : "baie_ouverte";
                    var srcImgValue_8_T = ('#logo_8_type#'!='#'+'logo_8_type#') ? "#logo_8_type#" : "png";

        // Update
            var srcPictureID;
            var srcImglogo_T;
            var State = parseFloat(_options.display_value);
            if (State == value_0){
                srcPictureID_M = srcImgValue_0;
                srcImglogo_T_M = srcImgValue_0_T;
            } else if (State == value_1){
                srcPictureID_M = srcImgValue_1;
                srcImglogo_T_M = srcImgValue_1_T;
            } else if (State == value_2){
                srcPictureID_M = srcImgValue_2;
                srcImglogo_T_M = srcImgValue_2_T;
            } else if (State == value_3){
                srcPictureID_M = srcImgValue_3;
                srcImglogo_T_M = srcImgValue_3_T;
            } else if (State == value_4){
                srcPictureID_M = srcImgValue_4;
                srcImglogo_T_M = srcImgValue_4_T;
            } else if (State == value_5){
                srcPictureID_M = srcImgValue_5;
                srcImglogo_T_M = srcImgValue_5_T;
            } else if (State == value_6){
                srcPictureID_M = srcImgValue_6;
                srcImglogo_T_M = srcImgValue_6_T;
            } else if (State == value_7){
                srcPictureID_M = srcImgValue_7;
                srcImglogo_T_M = srcImgValue_7_T;
            } else if (State == value_8){
                srcPictureID_M = srcImgValue_8;
                srcImglogo_T_M = srcImgValue_8_T;
            } else {
                srcPictureID_M = srcImglogoER;
                srcImglogo_T_M = srcImglogoER_T;
            }
        // Update IMG
            $('.cmd[data-cmd_uid=#uid#] .iconCmd#uid#').empty().append('<img src="'+srcImgURL_M +srcPictureID_M +'.'+ srcImglogo_T_M+'" '+srcImgSize_M+'>');
            $('.cmd[data-cmd_uid=#uid#] .value#uid#').empty().append(_options.display_value+' '+'#unite#');
        
        // Derniere durée changement dernier etat
            //Merci @Salvialf pour le code
                if (srcImglogoTime == "duree") {
                    jeedom.cmd.displayDuration(_options.valueDate, $('.cmd[data-cmd_id=#id#] .timeCmd#id#'));
                } else if (srcImglogoTime == "date") {
                    var srcdate     = new Date(_options.valueDate);
                    var srcformat   = $.datepicker.formatDate('D dd/mm', srcdate);
                    var srctime     = "à "+srcdate.getHours()+":"+(srcdate.getMinutes()<10?'0':'')+srcdate.getMinutes();
                    $('.cmd[data-cmd_id=#id#] .timeCmd#id#').empty().html(srcformat+'<br>'+srctime);
                } else if (srcImglogoTime == "heure") {
                    var srcdate     = new Date(_options.valueDate);
                    var srctime     = "à "+srcdate.getHours()+":"+(srcdate.getMinutes()<10?'0':'')+srcdate.getMinutes()+":"+(srcdate.getSeconds()<10?'0':'')+srcdate.getSeconds()+"";
                    $('.cmd[data-cmd_id=#id#] .timeCmd#id#').empty().html(srctime);
                };
            $('.cmd[data-cmd_uid=#uid#]').attr('title','Valeur du '+_options.valueDate+', collectée le '+_options.collectDate);
    }
    jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#',alertLevel:'#alertLevel#'});
</script>
</div>